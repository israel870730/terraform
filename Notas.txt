1- Como ver los eventos del cluster EKS ordenados:
kubectl -n workshop get events --sort-by='.metadata.creationTimestamp'

2- Para ver los nodos y un poco mas de info:
alias kgn='kubectl get nodes -L beta.kubernetes.io/arch -L eks.amazonaws.com/capacityType -L beta.kubernetes.io/instance-type -L eks.amazonaws.com/nodegroup -L topology.kubernetes.io/zone -L karpenter.sh/provisioner-name -L karpenter.sh/capacity-type'

3- Instalar kubectx and kubens 
4- kubectl logs nombre-del-pod and kubectl describe pods

5- Instalar eks-node-viewer:
go install github.com/awslabs/eks-node-viewer/cmd/eks-node-viewer@latest
sudo mv -v ~/go/bin/eks-node-viewer /usr/local/bin

6- kubectl get sc,pv,pvc -A


############ Tips de kubectl - Probarlos ##############
alias k=kubectl
kubectl get events -w --field-selector=type=Warning -A
kubectl get pods --watch --output-watch-events
kubectl wait --for=condition=ready pod -l foo=bar
kubectl set env pod/podname --list
kubectl top pods -A --sort-by='memory'


Para ver los addons instalados en un cluster:
eksctl get addon --cluster $CLUSTER


3. You can run kubectl commands from /home/vcs_cloudops location

###############################################################################
                  Para acceder a las cuentas
###############################################################################
Nota: antes de ejecutar cualquier script exportar el perfil que vamos a usar:
- export AWS_PROFILE=poc

    Para los ambientes que se precise MFA:
    - aws sts get-session-token --serial-number arn:aws:iam::########:mfa/user --token-code code-from-token

    - export AWS_ACCESS_KEY_ID=example-access-key-as-in-previous-output
    - export AWS_SECRET_ACCESS_KEY=example-secret-access-key-as-in-previous-output
    - export AWS_SESSION_TOKEN=example-session-token-as-in-previous-output

Si hay algun problema, chequear que usuario esta logueado en la CLI
- aws sts get-caller-identity

Si precisas cambiar la region en la que estas trabajando hay 2 opciones o la exportas usando:
export AWS_DEFAULT_REGION=us-west-1

o la puedes poner al final del comando que quieras usar, por ejemplo en este caso para ver las vpc que tengo en una region:
aws ec2 describe-vpcs --filters  --query "Vpcs[].{VpcId:VpcId,CIDR:CidrBlock}" --region us-west-1

https://repost.aws/es/knowledge-center/authenticate-mfa-cli


# Para eliminar la cache de terragrunt
find ./ -type f -name .terraform.lock.hcl | xargs rm -rf
find ./ -type d -name .terraform | xargs rm -rf